---
title: "Ansible Guide"
excerpt: ""
categories:
  - DevOps
toc: true
toc_sticky: true
---

Ansibleì„ ì²˜ìŒ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì‹¤ìŠµ ê°€ì´ë“œë¥¼ ì‘ì„±í•´ë´…ë‹ˆë‹¤. 
Rocky Linux 9 í™˜ê²½ì—ì„œ VirtualBox + Vagrantë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. 
ê¸°ë³¸ì ì¸ Ansible ì„¤ì¹˜ ë°©ë²•ê³¼ ì‚¬ìš© ê°€ì´ë“œë¥¼ ì‚´í´ë´…ë‹ˆë‹¤.
ê³µì‹ ë¬¸ì„œ(Getting Started â€“ Ansible)ì˜ íë¦„ì„ ë”°ë¦…ë‹ˆë‹¤.

---

## 1. Ansible ì„¤ì¹˜ (Rocky Linux 9 ê¸°ì¤€)

### [1] EPEL(EPEL Release) ì €ì¥ì†Œ ì„¤ì¹˜

```bash
sudo dnf install epel-release -y
```

### [2] Ansible ì„¤ì¹˜

```bash
sudo dnf install ansible -y
```

### [3] ì„¤ì¹˜ í™•ì¸

```bash
ansible --version
```
---

## 2. ê¸°ë³¸ êµ¬ì¡° ê°œë… (ì´ˆë³´ììš© ìš”ì•½)

|êµ¬ì„±  ìš”ì†Œ   |                                              	ì„¤ëª…|
|:---|:---------------------------------------------|
|Inventory| 	ì–´ë–¤ ì„œë²„ì— ëª…ë ¹ì„ ì‹¤í–‰í• ì§€ ì •ì˜ (ê¸°ë³¸: /etc/ansible/hosts) |
|Playbook| 	ìë™í™”í•  ì‘ì—…ì„ YAML í˜•ì‹ìœ¼ë¡œ ì •ì˜í•œ ìŠ¤í¬ë¦½íŠ¸                 |
|Module| 	ì‹¤ì œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ë‹¨ìœ„ (ex. yum, copy, service)     |
|Role| 	Playbookì„ ëª¨ë“ˆí™”í•´ì„œ ì¬ì‚¬ìš© ê°€ëŠ¥í•˜ê²Œ ë§Œë“  êµ¬ì¡°              |

---

## 3. Ansible ì‹¤ìŠµ í™˜ê²½ êµ¬ì„± (Vagrant + VirtualBox)

### [1] Vagrantfile ì‘ì„± (ì œì–´ë…¸ë“œ 1ëŒ€, ëŒ€ìƒë…¸ë“œ 2ëŒ€)

```bash
Vagrant.configure("2") do |config|
  config.vm.box = "rockylinux/9"

  config.vm.define "ansible-controller" do |controller|
    controller.vm.hostname = "controller"
    controller.vm.network "private_network", ip: "192.168.56.10"
  end

  (1..2).each do |i|
    config.vm.define "node#{i}" do |node|
      node.vm.hostname = "node#{i}"
      node.vm.network "private_network", ip: "192.168.56.1#{i}"
    end
  end
end
```

```bash
vagrant up
vagrant ssh controller
```

---

## 4. Ansible ê¸°ë³¸ ì‚¬ìš© ê°€ì´ë“œ

### [1] ëŒ€ìƒ ë…¸ë“œ SSH ì—°ê²° ì„¤ì •

ì»¨íŠ¸ë¡¤ëŸ¬ ë…¸ë“œì—ì„œ ì•„ë˜ ëª…ë ¹ì–´ë¡œ SSH í‚¤ ìƒì„± í›„, ê° ë…¸ë“œì— ë°°í¬í•©ë‹ˆë‹¤.

```bash
ssh-keygen -t rsa
ssh-copy-id vagrant@192.168.56.11
ssh-copy-id vagrant@192.168.56.12
```
ë¹„ë°€ë²ˆí˜¸ëŠ” ê¸°ë³¸ì ìœ¼ë¡œ vagrantì…ë‹ˆë‹¤.
 
### [2] Inventory íŒŒì¼ ì‘ì„±

```ini
# ~/inventory/hosts íŒŒì¼ ì‘ì„±
[webservers]
192.168.56.11

[dbservers]
192.168.56.12
```


### [3] Ping ëª¨ë“ˆë¡œ í…ŒìŠ¤íŠ¸

```bash
ansible all -i ~/inventory/hosts -m ping
```
ì„±ê³µí•˜ë©´ ê° ì„œë²„ì—ì„œ pong ì‘ë‹µì´ ëŒì•„ì˜µë‹ˆë‹¤.

---

## 5. Playbook ì˜ˆì œ (ê¸°ì´ˆ)

ì˜ˆì‹œ: Apache ì„¤ì¹˜ ë° ì„œë¹„ìŠ¤ ì‹œì‘

```yaml
# install_apache.yml
- name: Install Apache webserver
  hosts: webservers
  become: true

  tasks:
  - name: Install httpd
    ansible.builtin.yum:
      name: httpd
      state: present

  - name: Start and enable httpd
    ansible.builtin.service:
      name: httpd
      state: started
      enabled: true
```

ì‹¤í–‰:
```bash
ansible-playbook -i ~/inventory/hosts install_apache.yml
```

---

## 6. ì‹œë‚˜ë¦¬ì˜¤ë³„ Ansible ì¶”ì²œ í™œìš©ë²•

|ì‹œë‚˜ë¦¬ì˜¤	| ì‚¬ìš© ì˜ˆ	                                    | ì„¤ëª…                   |
|:---|:-----------------------------------------|:---------------------|
|âœ… ì„œë²„ ì´ˆê¸° ì„¸íŒ… ìë™í™”	| ì‚¬ìš©ì ì¶”ê°€, íŒ¨í‚¤ì§€ ì„¤ì¹˜, ë°©í™”ë²½ ì„¤ì •| 	ë°˜ë³µì‘ì—…ì„ ìë™í™”í•˜ì—¬ ì‹¤ìˆ˜ ë°©ì§€   |
|âœ… ì›¹ ì„œë²„ ë°°í¬	| Apache/Nginx ì„¤ì¹˜, ì„¤ì • ë°°í¬| 	ì„¤ì •ì´ ë°”ë€Œì–´ë„ ì¬ì ìš©ì´ ê°„í¸    |
|âœ… DB ì„œë²„ êµ¬ì„±	| MySQL ì„¤ì¹˜ ë° ê³„ì • ì„¤ì •	| ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸° ì„¤ì • ë°˜ë³µ ì‹œ ìœ ìš© |
|âœ… ë°±ì—… ìë™í™”	| ìŠ¤í¬ë¦½íŠ¸ ë³µì‚¬, cron ì„¤ì •	| ì •ê¸° ì‘ì—…ì„ ì½”ë“œë¡œ ê´€ë¦¬ ê°€ëŠ¥     |
|âœ… í…ŒìŠ¤íŠ¸ ì„œë²„ êµ¬ì¶•| 	í…ŒìŠ¤íŠ¸ í™˜ê²½ í†µí•© ë°°í¬| 	VM/ì»¨í…Œì´ë„ˆ í…ŒìŠ¤íŠ¸ í™˜ê²½ í†µí•©ê´€ë¦¬ |

---

## 7. ê³µì‹ë¬¸ì„œ ì°¸ê³ 

[ğŸ“˜ ê³µì‹ ê°€ì´ë“œ ìš”ì•½ ë§í¬
](https://docs.ansible.com/ansible/latest/getting_started/index.html)