---
title: "ì»¨í…Œì´ë„ˆì˜ ì´í•´: ì‹¬í™”í¸"
excerpt: "ì»¨í…Œì´ë„ˆ ê¸°ìˆ ì˜ í•µì‹¬ì¸ 'ë„¤ì„ìŠ¤í˜ì´ìŠ¤'ì™€ 'croups'ì— ê´€í•´ ì•Œì•„ë´…ë‹ˆë‹¤."
categories:
  - DevOps
  - ì¸í”„ë¼
tags:
  - Container
toc: true
toc_sticky: true
last_modified_at: 2025-03-05
---

## ê°œìš”
ì»¨í…Œì´ë„ˆê°€ ì–´ë–»ê²Œ ë…ë¦½ì ì¸ í™˜ê²½ì„ ìœ ì§€í•˜ëŠ”ì§€ ì´í•´í•˜ê¸° ìœ„í•´, `ë„¤ì„ìŠ¤í˜ì´ìŠ¤`ì™€ `croups` ê°œë…ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤.

## ë„¤ì„ìŠ¤í˜ì´ìŠ¤ (Namespaces)
ë¦¬ëˆ…ìŠ¤ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ëŠ” ì»¨í…Œì´ë„ˆê°€ ë§ˆì¹˜ ë³„ë„ì˜ ë…ë¦½ëœ ì‹œìŠ¤í…œì²˜ëŸ¼ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

### 1. ì¢…ë¥˜

| ë„¤ì„ìŠ¤í˜ì´ìŠ¤  | ì—­í•                                | ì»¨í…Œì´ë„ˆ ì ìš© ì‚¬ë¡€                         |
|:--------|:---------------------------------|:-----------------------------------|
| PID     | í”„ë¡œì„¸ìŠ¤ IDë¥¼ ë¶„ë¦¬í•˜ì—¬ ë…ë¦½ì ì¸ í”„ë¡œì„¸ìŠ¤ ê³µê°„ ì œê³µ    | ê° ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ PID 1ì´ init í”„ë¡œì„¸ìŠ¤ ì—­í•  ìˆ˜í–‰ |
| Mount   | ì»¨í…Œì´ë„ˆë³„ë¡œ ë…ë¦½ì ì¸ íŒŒì¼ ì‹œìŠ¤í…œ ì œê³µ            | ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ í˜¸ìŠ¤íŠ¸ì˜ íŠ¹ì • ë””ë ‰í† ë¦¬ ë§ˆìš´íŠ¸         |
| Network | ì»¨í…Œì´ë„ˆë§ˆë‹¤ ë…ë¦½ì ì¸ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ì œê³µ        | ì»¨í…Œì´ë„ˆ ê°„ í†µì‹ ì„ ìœ„í•´ ë¸Œë¦¬ì§€ ë„¤íŠ¸ì›Œí¬ ì‚¬ìš©          |
| UTS     | ì»¨í…Œì´ë„ˆë§ˆë‹¤ ê°œë³„ì ì¸ í˜¸ìŠ¤íŠ¸ë„¤ì„ ì œê³µ             | ì»¨í…Œì´ë„ˆë³„ë¡œ ì„œë¡œ ë‹¤ë¥¸ hostname ì‚¬ìš©           |
| IPC     | ì»¨í…Œì´ë„ˆ ê°„ ê³µìœ  ë©”ëª¨ë¦¬ ë° ë©”ì‹œì§€ í ë¶„ë¦¬         | ê° ì»¨í…Œì´ë„ˆì˜ ê³µìœ  ë©”ëª¨ë¦¬ ê³µê°„ ë¶„ë¦¬               |
| User    | ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì˜ ì‚¬ìš©ì IDì™€ í˜¸ìŠ¤íŠ¸ì˜ ì‚¬ìš©ì IDë¥¼ ë§¤í•‘ | ë¹„ë£¨íŠ¸(Non-root) ì»¨í…Œì´ë„ˆ ì‹¤í–‰              |

### 2. ì‹¤ìŠµ
#### 1) PID ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‹¤ìŠµ - í”„ë¡œì„¸ìŠ¤ ê²©ë¦¬ í™•ì¸
ğŸ’¡ ëª©í‘œ: ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ì´ìš©í•´ ë³„ë„ì˜ í”„ë¡œì„¸ìŠ¤ ê³µê°„ì„ ë§Œë“¤ê³ , ê²©ë¦¬ ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

1ï¸âƒ£ ìƒˆë¡œìš´ PID ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
```bash
unshare --fork --pid --mount-proc bash
```
- `unshare`: ìƒˆë¡œìš´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ëª…ë ¹ì–´
- `--fork`: ìƒˆë¡œìš´ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ì—ì„œ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰
- `--pid`: PID ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
- `--mount-proc`: `/proc` íŒŒì¼ ì‹œìŠ¤í…œì„ ìƒˆë¡­ê²Œ ë§ˆìš´íŠ¸

2ï¸âƒ£ í˜„ì¬ í”„ë¡œì„¸ìŠ¤ í™•ì¸
```bash
ps aux
```
-> ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ë¶€ì—ì„œëŠ” PID 1ë²ˆì´ ìƒˆë¡œ ì‹œì‘ëœ `bash` í”„ë¡œì„¸ìŠ¤ê°€ ë©ë‹ˆë‹¤.   
-> í˜¸ìŠ¤íŠ¸ì—ì„œëŠ” ì´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

![img.png](../assets/images/check_process.png)

3ï¸âƒ£ í˜¸ìŠ¤íŠ¸ì—ì„œ ì‹¤í–‰ ì¤‘ì¸ PIDì™€ ë¹„êµ
```bash
ps aux | grep bash
```
-> PIDê°€ ì„œë¡œ ë‹¤ë¦„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.   
![img_1.png](../assets/images/check_host_pid.png)
---
#### 2) Network ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ì‹¤ìŠµ - ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬
ğŸ’¡ ëª©í‘œ: ì»¨í…Œì´ë„ˆì™€ ìœ ì‚¬í•˜ê²Œ ê²©ë¦¬ëœ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì„ êµ¬ì„±í•˜ê³  í™•ì¸í•©ë‹ˆë‹¤.

1ï¸âƒ£ ìƒˆë¡œìš´ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ìƒì„±
```bash
ip netns add test_ns
```
-> `test_ns`ë¼ëŠ” ë„¤ì„ìŠ¤í˜ì´ìŠ¤ê°€ ìƒì„±ë¨

2ï¸âƒ£ ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ëª©ë¡ í™•ì¸
```bash
ip netns list
```
-> `test_ns`ê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆëŠ”ì§€ í™•ì¸   
![img_2.png](../assets/images/check_netns.png)

3ï¸âƒ£ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ í™•ì¸
```bash
ip netns exec test_ns ip a
```
![img_3.png](../assets/images/check_netns_if.png)

4ï¸âƒ£ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ ì¶”ê°€
```bash
ip link add veth0 type veth peer name veth1
ip link set veth1 netns test_ns
```
- veth0ì™€ veth1ì´ë¼ëŠ” ê°€ìƒ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ë¥¼ ìƒì„±
- veth1ì„ test_ns ë„¤íŠ¸ì›Œí¬ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ë¡œ ì´ë™

5ï¸âƒ£ ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ í™œì„±í™”
```bash
ip link set veth0 up
ip netns exec test_ns ip link set veth1 up
```
- í˜¸ìŠ¤íŠ¸ì™€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤ ë‚´ë¶€ì—ì„œ ê°ê° ì¸í„°í˜ì´ìŠ¤ë¥¼ í™œì„±í™”

6ï¸âƒ£ IP ì£¼ì†Œ í• ë‹¹
```bash
ip addr add 192.168.1.1/24 dev veth0
ip netns exec test_ns ip addr add 192.168.1.2/24 dev veth1
```
- veth0ê³¼ veth1ì— ê°ê° IPë¥¼ í• ë‹¹í•˜ì—¬ í†µì‹  ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •

7ï¸âƒ£ í•‘ í…ŒìŠ¤íŠ¸
```bash
ip netns exec test_ns ping -c 3 192.168.1.1
```
â†’ test_ns ë‚´ë¶€ì—ì„œ í˜¸ìŠ¤íŠ¸ì˜ veth0ì™€ ì •ìƒì ìœ¼ë¡œ í†µì‹ í•˜ëŠ”ì§€ í™•ì¸.
![img_4.png](../assets/images/check_ping_result.png)