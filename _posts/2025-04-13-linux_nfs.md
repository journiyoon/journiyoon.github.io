---
title: "Autofsλ¥Ό ν™μ©ν• NFS μ„λ²„ κµ¬μ„±"
excerpt: ""
categories:
  - Linux 
tags:
  - NFS
toc: true
toc_sticky: true
last_modified_at: 2025-04-14
---

NFS (Network File System)λ” λ¦¬λ…μ¤ μ‹μ¤ν…μ—μ„ λ„λ¦¬ μ“°μ΄λ” λ„¤νΈμ›ν¬ νμΌ κ³µμ  λ°©μ‹μ…λ‹λ‹¤. 
ν•μ§€λ§ κ³µμ  λ””λ ‰ν„°λ¦¬λ¥Ό ν•­μƒ λ§μ΄νΈν•΄λ‘λ©΄ μ‹μ¤ν… μμ›μ„ λ¶ν•„μ”ν•κ² μ‚¬μ©ν•  μ μμµλ‹λ‹¤. 
μ΄λ΄ λ• μ μ©ν• λ„κµ¬κ°€ λ°”λ΅ `Autofs`μ…λ‹λ‹¤.

λ³Έ ν¬μ¤ν…μ—μ„λ” Autofsλ¥Ό ν™μ©ν•΄ NFS λ””λ ‰ν„°λ¦¬λ¥Ό μλ™ λ§μ΄νΈν•λ” κµ¬μ„± λ°©λ²•μ„ μ‹¤μµ ν™κ²½ κΈ°μ¤€μΌλ΅ μ •λ¦¬ν•΄λ³΄κ² μµλ‹λ‹¤.

---

## π§± ν™κ²½ μ •λ³΄

| κµ¬λ¶„           | μ„¤μ •                 |       
|:-------------|:-------------------|
| NFS μ„λ²„ IP    | 192.168.56.11      |       
| κ³µμ  λ””λ ‰ν„°λ¦¬      | /srv/share         |       
| ν΄λΌμ΄μ–ΈνΈ λ§μ΄νΈ μ§€μ  | /mnt/nfs           |       
| μ‚¬μ©μ μ΄λ¦„       | devuser (UID 1001) |       

---

## π“¦ 1. NFS μ„λ²„ μ„¤μ •

### β‘  κ³µμ  λ””λ ‰ν† λ¦¬ μƒμ„± λ° κ¶ν• μ„¤μ •

```bash
sudo mkdir -p /srv/share
sudo chown 1001:1001 /srv/share
sudo chmod 755 /srv/share
```
- devuser μ‚¬μ©μμ—κ² μ“°κΈ° κ¶ν•μ„ μ£ΌκΈ° μ„ν•΄ UID 1001λ΅ μ†μ μ μ„¤μ •

### β‘΅ /etc/exports μ„¤μ •

```bash
sudo vi /etc/exports
````
```bash
/srv/share 192.168.56.0/24(rw,sync,no_subtree_check)
```
**μ„¤μ • μ μ©:**
```bash
sudo exports -ra
```

### β‘Ά NFS μ„λΉ„μ¤ μ‹¤ν–‰ λ° λ°©ν™”λ²½ μ„¤μ •

```bash
sudo systemctl enable --now nfs-server               # μ„λΉ„μ¤ μ‹¤ν–‰ λ° μ¬λ¶€ν… ν›„ μλ™ ν™μ„±ν™”
sudo firewall-cmd --permanent --add-service=nfs      # μ„λΉ„μ¤ λ“±λ΅(ν¬νΈ μ„¤μ •κ³Ό λ™μΌ)
sudo firewall-cmd --reload                           # λ°©ν™”λ²½ μ„¤μ • μ μ©
```

## π–¥οΈ 2. ν΄λΌμ΄μ–ΈνΈ μ„¤μ • (Autofs μ‚¬μ©)

### β‘  Autofs μ„¤μΉ

```bash
sudo dnf install -y autofs
```

### β‘΅ Autofs λ©”μΈ μ„¤μ •

```bash
sudo vi /etc/auto.master.d/nfs.autofs
```
```bash
/-         /etc/auto.direct
```
- `/-`λ” Direct Map λ°©μ‹ μ‚¬μ©μ„ μλ―Έ -> μ λ€ κ²½λ΅λ΅ μ§μ ‘ λ§μ΄νΈ μ§€μ •

### β‘Ά λ§μ΄νΈ λ€μƒ μ •μ

```bash
sudo vi /etc/auto.direct
```
```bash
/mnt/nfs        -rw,sync     192.168.56.11:/srv/share
```
> /mnt/nfs λ””λ ‰ν„°λ¦¬μ— μ ‘κ·Ό μ‹ μλ™μΌλ΅ λ§μ΄νΈλ¨

### β‘£ Autofs μ„λΉ„μ¤ μ‹μ‘

```bash
sudo systemctl enable --now autofs
```

## π” 3. λ§μ΄νΈ ν…μ¤νΈ

```bash
ls /mnt/nfs
```
- μ ‘κ·Ό μ‹ μλ™μΌλ΅ NFS μ„λ²„κ°€ λ§μ΄νΈλ¨
- λ§μ΄νΈ ν™•μΈ:
```bash
mount | grep /mnt/nfs
```
- μΌμ •μ‹κ°„ (κΈ°λ³Έ 5λ¶„) λ―Έμ‚¬μ© μ‹ μλ™ μ–Έλ§μ΄νΈλ¨

## κ·Έ μ™Έ ν

- μλ™ μ–Έλ§μ΄νΈ μ‹κ°„μ€ `/etc/autofs.conf`μ—μ„ timeount=300 μΌλ΅ μ΅°μ  κ°€λ¥
- μ—¬λ¬ κ³µμ  λ””λ ‰ν„°λ¦¬λ¥Ό λ§μ΄νΈν•  κ²½μ° Indirect Map λ°©μ‹μ΄ λ” κ°„κ²°ν•¨
- UID/GID κ°€ λ‹¤λ¥΄λ©΄ Permission denied μ¤λ¥ λ°μƒν•λ―€λ΅ μ£Όμ ν•„μ”ν•¨
- showmount -e <server IP> λ΅ μ„λ²„ κ³µμ  λ©λ΅ ν™•μΈ κ°€λ¥